# Word Munch Extension - æ™ºèƒ½è¯æ±‡ç®€åŒ–æœåŠ¡

Word Munch æ˜¯ä¸€ä¸ªåŸºäºAIçš„æ™ºèƒ½è¯æ±‡ç®€åŒ–æœåŠ¡ï¼Œé€šè¿‡AWS Bedrockæä¾›é€’è¿›å¼åŒä¹‰è¯ç”Ÿæˆï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å¤æ‚è¯æ±‡ã€‚æ”¯æŒå¤šè¯­è¨€è¾“å‡ºå’Œæ™ºèƒ½ç¼“å­˜æœºåˆ¶ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### æ™ºèƒ½è¯æ±‡ç®€åŒ–
- **é€’è¿›å¼åŒä¹‰è¯** - ä»å¤æ‚åˆ°ç®€å•çš„5ä¸ªåŒä¹‰è¯
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** - æ ¹æ®å¥å­ä¸Šä¸‹æ–‡ç”Ÿæˆåˆé€‚çš„åŒä¹‰è¯
- **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­æ–‡(zh)å’Œè‹±æ–‡(en)è¾“å‡º
- **è¯­è¨€ç‹¬ç«‹** - è¾“å…¥è¯æ±‡è¯­è¨€ä¸å½±å“è¾“å‡ºè¯­è¨€

### é«˜æ€§èƒ½æ¶æ„
- **æ— æœåŠ¡å™¨æ¶æ„** - AWS Lambda + API Gateway
- **æ™ºèƒ½ç¼“å­˜** - DynamoDBç¼“å­˜ï¼Œæé«˜å“åº”é€Ÿåº¦
- **æˆæœ¬ä¼˜åŒ–** - æŒ‰éœ€ä»˜è´¹ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹
- **é«˜å¯ç”¨æ€§** - 99.9%å¯ç”¨æ€§ä¿è¯

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### AWS æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chrome Extensionâ”‚    â”‚   API Gateway   â”‚    â”‚  Word Muncher   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚     Lambda      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   DynamoDB      â”‚
                    â”‚   Cache Table   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AWS Bedrock   â”‚
                    â”‚   (Llama 3 8B)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æŠ€æœ¯æ ˆ | åŠŸèƒ½ |
|------|--------|------|
| API Gateway | AWS API Gateway | RESTful APIæ¥å£ï¼ŒCORSæ”¯æŒï¼Œé™æµ |
| Lambda | AWS Lambda | è¯æ±‡ç®€åŒ–é€»è¾‘ï¼ŒAIæ¨¡å‹è°ƒç”¨ |
| ç¼“å­˜ | DynamoDB | æ™ºèƒ½ç¼“å­˜ï¼ŒTTLè‡ªåŠ¨è¿‡æœŸ |
| AIæ¨¡å‹ | AWS Bedrock | Llama 3 8B æ¨¡å‹ï¼Œå¤šè¯­è¨€æ”¯æŒ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
word-munch-extension-serverless/
â”œâ”€â”€ aws-lambda/                    # AWS Lambda å‡½æ•°
â”‚   â””â”€â”€ word_muncher_lambda.py    # è¯æ±‡ç®€åŒ–æœåŠ¡
â”œâ”€â”€ chrome-extension/             # Chromeæ‰©å±•
â”‚   â”œâ”€â”€ background/               # åå°è„šæœ¬
â”‚   â”œâ”€â”€ content/                  # å†…å®¹è„šæœ¬
â”‚   â”œâ”€â”€ popup/                    # å¼¹å‡ºç•Œé¢
â”‚   â””â”€â”€ shared/                   # å…±äº«æ¨¡å—
â”œâ”€â”€ infrastructure/               # åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ app.py                    # CDKåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ word_munch_stack.py       # CDKå †æ ˆå®šä¹‰
â”‚   â””â”€â”€ requirements.txt          # Pythonä¾èµ–
â””â”€â”€ docs/                         # æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. éƒ¨ç½²AWSæœåŠ¡

```bash
# å®‰è£…ä¾èµ–
cd infrastructure
pip install -r requirements.txt

# éƒ¨ç½²åŸºç¡€è®¾æ–½
cdk deploy
```

### 2. æµ‹è¯•API

```bash
# ä¸­æ–‡è¾“å‡º
curl -X POST https://your-api-gateway-url/dev/word-muncher \
  -H "Content-Type: application/json" \
  -d '{
    "word": "å¤æ‚",
    "context": "è¿™ä¸ªæ•°å­¦é—®é¢˜å¾ˆå¤æ‚",
    "language": "zh"
  }'

# è‹±æ–‡è¾“å‡º
curl -X POST https://your-api-gateway-url/dev/word-muncher \
  -H "Content-Type: application/json" \
  -d '{
    "word": "complex",
    "context": "This math problem is very complex",
    "language": "en"
  }'
```

### 3. é…ç½®Chromeæ‰©å±•

1. æ‰“å¼€Chromeæ‰©å±•ç®¡ç†é¡µé¢ (`chrome://extensions/`)
2. å¯ç”¨å¼€å‘è€…æ¨¡å¼
3. åŠ è½½è§£å‹çš„æ‰©å±•ï¼ˆ`chrome-extension`ç›®å½•ï¼‰
4. é…ç½®APIç«¯ç‚¹URL

## ğŸ”§ API æ–‡æ¡£

### è¯·æ±‚æ ¼å¼

```json
{
  "word": "è¯æ±‡",
  "context": "ä¸Šä¸‹æ–‡å¥å­ï¼ˆå¯é€‰ï¼‰",
  "language": "zh|en"
}
```

### å“åº”æ ¼å¼

```json
{
  "word": "å¤æ‚",
  "context": "è¿™ä¸ªæ•°å­¦é—®é¢˜å¾ˆå¤æ‚",
  "language": "zh",
  "synonyms": ["å›°éš¾", "å›°æƒ‘", "éš¾æ‡‚", "ç®€å•", "å®¹æ˜“"],
  "service": "word-muncher",
  "cached": false
}
```

### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| word | string | æ˜¯ | è¦ç®€åŒ–çš„è¯æ±‡ |
| context | string | å¦ | ä¸Šä¸‹æ–‡å¥å­ï¼Œæé«˜å‡†ç¡®æ€§ |
| language | string | å¦ | è¾“å‡ºè¯­è¨€ï¼Œzh(ä¸­æ–‡)æˆ–en(è‹±æ–‡)ï¼Œé»˜è®¤en |

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
- **ç¼“å­˜å‘½ä¸­**: ~50-100ms
- **é¦–æ¬¡è¯·æ±‚**: ~1-3ç§’
- **å¹¶å‘å¤„ç†**: æ”¯æŒ100 req/s

### ç¼“å­˜æ•ˆæœ
- **ç¼“å­˜å‘½ä¸­ç‡**: 80-90%
- **TTL**: 7å¤©è‡ªåŠ¨è¿‡æœŸ
- **å­˜å‚¨æˆæœ¬**: æŒ‰éœ€ä»˜è´¹

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pip install boto3 aws-cdk-lib

# æœ¬åœ°æµ‹è¯•Lambda
python -m pytest tests/

# éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ
cdk deploy --profile dev
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°è¯­è¨€æ”¯æŒ**
   ```python
   # åœ¨generate_synonymså‡½æ•°ä¸­æ·»åŠ æ–°è¯­è¨€åˆ†æ”¯
   elif language == 'ja':
       prompt = f"""
       Generate 5 progressive synonyms in Japanese...
       """
   ```

2. **è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥**
   ```python
   # ä¿®æ”¹ç¼“å­˜é”®ç”Ÿæˆé€»è¾‘
   cache_key = f"{word}:{language}:{context_hash}"
   ```

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•

```bash
cd aws-lambda
python -m pytest tests/unit/
```

### é›†æˆæµ‹è¯•

```bash
# æµ‹è¯•APIç«¯ç‚¹
python test_api.py

# æµ‹è¯•ç¼“å­˜åŠŸèƒ½
python test_cache.py
```

### æ€§èƒ½æµ‹è¯•

```bash
# å‹åŠ›æµ‹è¯•
python performance_test.py --requests 1000 --concurrent 10
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### CloudWatchç›‘æ§

- **LambdaæŒ‡æ ‡**: æ‰§è¡Œæ—¶é—´ã€é”™è¯¯ç‡ã€å†…å­˜ä½¿ç”¨
- **API Gateway**: è¯·æ±‚æ•°ã€å»¶è¿Ÿã€4xx/5xxé”™è¯¯
- **DynamoDB**: è¯»å†™å®¹é‡ã€ç¼“å­˜å‘½ä¸­ç‡

### æ—¥å¿—åˆ†æ

```bash
# æŸ¥çœ‹Lambdaæ—¥å¿—
aws logs tail /aws/lambda/word-munch-word-muncher-dev --follow

# æŸ¥çœ‹API Gatewayæ—¥å¿—
aws logs tail /aws/apigateway/word-munch-api-dev --follow
```

## ğŸ”’ å®‰å…¨é…ç½®

### IAMæƒé™

- **Lambdaæ‰§è¡Œè§’è‰²**: Bedrockè°ƒç”¨ã€DynamoDBè®¿é—®
- **API Gateway**: Lambdaè°ƒç”¨æƒé™
- **æœ€å°æƒé™åŸåˆ™**: åªæˆäºˆå¿…è¦æƒé™

### ç½‘ç»œå®‰å…¨

- **CORSé…ç½®**: å…è®¸è·¨åŸŸè¯·æ±‚
- **é™æµä¿æŠ¤**: 100 req/s, 200 burst
- **HTTPSå¼ºåˆ¶**: æ‰€æœ‰APIè°ƒç”¨ä½¿ç”¨HTTPS

## ğŸ’° æˆæœ¬ä¼˜åŒ–

### å½“å‰æˆæœ¬ç»“æ„

| æœåŠ¡ | æˆæœ¬/æœˆ | ä¼˜åŒ–ç­–ç•¥ |
|------|---------|----------|
| Lambda | $5-15 | å†·å¯åŠ¨ä¼˜åŒ–ï¼Œå†…å­˜è°ƒä¼˜ |
| API Gateway | $3-8 | ç¼“å­˜ç­–ç•¥ï¼Œå‡å°‘è°ƒç”¨ |
| DynamoDB | $2-5 | TTLè®¾ç½®ï¼ŒæŒ‰éœ€ä»˜è´¹ |
| Bedrock | $10-30 | æ¨¡å‹é€‰æ‹©ï¼Œç¼“å­˜å‘½ä¸­ |

### ä¼˜åŒ–å»ºè®®

1. **ç¼“å­˜ä¼˜åŒ–**: æé«˜ç¼“å­˜å‘½ä¸­ç‡åˆ°95%+
2. **æ¨¡å‹é€‰æ‹©**: æ ¹æ®å¤æ‚åº¦é€‰æ‹©åˆé€‚æ¨¡å‹
3. **æ‰¹é‡å¤„ç†**: æ”¯æŒæ‰¹é‡è¯æ±‡å¤„ç†
4. **CDNé›†æˆ**: æ·»åŠ CloudFrontåŠ é€Ÿ

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ (1-2ä¸ªæœˆ)
- [ ] æ”¯æŒæ›´å¤šè¯­è¨€ (æ—¥è¯­ã€éŸ©è¯­ã€æ³•è¯­)
- [ ] æ·»åŠ è¯æ±‡éš¾åº¦è¯„çº§
- [ ] å®ç°æ‰¹é‡å¤„ç†API
- [ ] é›†æˆCloudFront CDN

### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯å’ŒAPIå¯†é’¥
- [ ] å®ç°ä¸ªæ€§åŒ–è¯æ±‡æ¨è
- [ ] æ”¯æŒè‡ªå®šä¹‰è¯æ±‡åº“
- [ ] æ·»åŠ ä½¿ç”¨ç»Ÿè®¡å’Œåˆ†æ

### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
- [ ] æ‰©å±•åˆ°æ¦‚å¿µåˆ†æå’ŒçŸ¥è¯†å›¾è°±
- [ ] é›†æˆæ›´å¤šAIæ¨¡å‹
- [ ] å¼€å‘ç§»åŠ¨ç«¯åº”ç”¨
- [ ] ä¼ä¸šçº§åŠŸèƒ½æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository](https://github.com/your-username/word-munch-extension-serverless)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/word-munch-extension-serverless/issues)
- åŠŸèƒ½å»ºè®®: [Discussions](https://github.com/your-username/word-munch-extension-serverless/discussions) 